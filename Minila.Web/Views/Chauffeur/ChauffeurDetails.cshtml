@using MinilaDataAcess.Model
@model MinilaDataAcess.Model.Chauffeur
@{
    ViewData["Title"] = "ChauffeurDetails";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!-- Start Row  -->
<div class="row">
    <div class="col-lg-12">
      <!-- Profile widget --> 
      <div class="bg-white rounded overflow-hidden mt-10">
         <div class="px-4 pt-0 pb-4 cover">
            <div class="media align-items-end profile-head d-flex flex-row ">
               <div class="profile mr-3 d-flex flex-column">
                   <img src="https://images.unsplash.com/photo-1522075469751-3a6694fb2f61?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=500&q=80" alt="..." width="130" class="rounded mb-2 img-thumbnail">
                   <a href="#" class="btn btn-outline-dark btn-sm btn-block">Edit profile</a>
               </div>
               <div class="media-body mb-5 text-white ml-10">
                  <h4 class="mt-0 mb-0 Profilename">@Model.FirstName @Model.LastName</h4>
                  <p class="small mb-4"> <i class="fas fa-map-marker-alt mr-2"></i>New York</p>
               </div>
            </div>
         </div>
         <div class="bg-light p-4 d-flex justify-content-end text-center"> 
             <!--Enable Button -->
            <a href="#" class="btn btn-outline-success btn-sm btn-block " data-bs-toggle="modal" data-bs-target="#exampleModal">Enable RoadWay  </a>

            <ul class="list-inline mb-0 ml-20">
               <li class="list-inline-item">
                  <h5 class="font-weight-bold mb-0 d-block">215</h5>
                  <small class="text-muted"> <i class="fas fa-image mr-1"></i>Total Ride </small> 
               </li>
               <li class="list-inline-item">
                  <h5 class="font-weight-bold mb-0 d-block">4.5</h5>
                  <small class="text-muted"> <i class="fas fa-user mr-1"></i>Ratting</small> 
               </li>
               <li class="list-inline-item">
                  <h5 class="font-weight-bold mb-0 d-block">340</h5>
                  <small class="text-muted"> <i class="fas fa-user mr-1"></i>Earing</small> 
               </li>
            </ul>
            
         </div>
         <div class="px-4 py-3">
            <h5 class="mb-10">About</h5>
            <div class="p-4 rounded bg-light">
                <div class="d-flex flex-row">
                    <p class="font-italic mb-0 w-25">Email </p>
                    <p class="font-italic mb-0">@Model.Email</p>
                </div>
                <div class="d-flex flex-row">
                    <p class="font-italic mb-0 w-25">Phone Number </p>
                    <p class="font-italic mb-0">@Model.PhoneNumber</p>
                </div>
                <div class="d-flex flex-row">
                    <p class="font-italic mb-0 w-25">CRCode</p>
                    <p class="font-italic mb-0">@Model.CRCode</p>
                </div>
                <div class="d-flex flex-row">
                    <p class="font-italic mb-0 w-25">Status </p>
                    <p class="font-italic mb-0"> @Model.Status</p>
                </div>
                <div class="d-flex flex-row">
                    <p class="font-italic mb-0 w-25">Create Date</p>
                    <p class="font-italic mb-0 ">@Model.CreateDate</p>
                </div>
            </div>
         </div>
         <div class="py-4 px-4">
            <div class="d-flex align-items-center justify-content-between mb-3">
               <h5 class="mb-0">Recent Rides</h5>
               <a href="#" class="btn btn-link text-muted">Show all</a> 
            </div>
            <div class="row">
               
            </div>
         </div>
      </div>
    </div>

</div>

<div class="row py-5">
   <div class="col-md-12 mx-auto">
        <div class="row">
            <div class="col-lg-12">
               <div class="card-style mb-30">
                  <h6 class="mb-10">Your Enable Road</h6>
                  <div class="table-wrapper table-responsive">
                    <table class="table">
                      <thead>
                        <tr>
                          <th><h6>#</h6></th>
                          <th><h6>Student Name</h6></th>
                          <th><h6>School name</h6></th>
                          <th><h6>Status</h6></th>
                          <th><h6>Action</h6></th>
                        </tr>
                        <!-- end table row-->
                      </thead>
                      <tbody>
                        @foreach (var trip in ViewData["TripRequest"] as List<MinilaDataAcess.Model.TripRequest>)
                        {
                                    <tr>
                                        <td>@trip.id</td>
                                        <td></td>
                                        <td></td>
                                        <td>
                                            @{
                                                switch(@trip.status)
                                                {
                                                    case 1:
                                                        <a href="" role="button" class="status-btn active-btn mr-2 " data-bs-toggle="modal" data-bs-target="#RiderTripModal">Confirm</a>
                                                        <span role="button" class="status-btn close-btn">Decliend</span>
                                                        break;
                                                    case 2:
                                                        <span class="status-btn active-btn mr-2">Accept</span>
                                                        break;
                                                }
                                            }
                            </td>
                            <td>
                                <div class="action">
                                  <button class="text-danger">
                                    <i class="lni lni-trash-can"></i>
                                  </button>
                                </div>
                            </td>
                        </tr>    
                            <!-- Modal -->
                            <div class="modal fade" id="RiderTripModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                              <div class="modal-dialog">
                                <form asp-controller="TripRequest" asp-action="UpdateTripRequest" method="post">
                                    <div class="modal-content">
                                      <div class="modal-header">
                                        <h5 class="modal-title" id="exampleModalLabel">Enable Your RoadWay</h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                      </div>
                                      <div class="modal-body">
                                          <p>@trip.id</p>
                                          <p>@trip.status</p>
                                      </div>
                                      <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                        <input type="submit" value="Create" class="btn btn-primary" />
                                      </div>
                                    </div>
                                </form>
                              </div>
                            </div>                          
                        }
                      </tbody>
                    </table>
                    <!-- end table -->
                  </div>
               </div>
                <!-- end card -->
            </div>
        </div>
   </div>
</div>

<div class="row py-5 ">
   <div class="col-md-12 mx-auto">
    <div class="row">
              <div class="col-lg-12">
                <div class="card-style mb-30">
                  <h6 class="mb-10">Your Enable Road</h6>

                  <div class="table-wrapper table-responsive">
                    <table class="table">
                      <thead>
                        <tr>
                          <th><h6>#</h6></th>
                          <th><h6>Road Way</h6></th>
                          <th><h6>School name</h6></th>
                          <th><h6>Remark</h6></th>
                          <th><h6>Status</h6></th>
                          <th><h6>Action</h6></th>
                        </tr>
                        <!-- end table row-->
                      </thead>
                      <tbody>
                  @foreach (var road in ViewData["ChauffeurRequest"] as List<FindRider>)
                  {
                        <tr>
                          <td>
                            <div class="employee-image">
                              <img src="assets/images/lead/lead-1.png" alt="" />
                            </div>
                          </td>
                          <td class="min-width">
                             @foreach (var item in ViewData["Roadlist"] as List<RoadWayWebModel>)
                             {
                                if(@item.id == @road.RoadId)
                                {
                                  <p>@item.RoadName </p>
                                }  
                             }  
                          </td>
                          <td class="min-width">
                             @foreach (var item in ViewData["school"] as List<SchoolWebModel>)
                             {
                                if(@item.schoolId == @road.SchholId)
                                {
                                  <p>@item.SchoolName </p>
                                }
                             }
                          </td>
                          <td class="min-width">
                            <p>@road.remark</p>
                          </td>
                          <td class="min-width">
                            <span class="status-btn active-btn">Active</span>
                          </td>
                          <td>
                            <div class="action">
                              <button class="text-danger">
                                <i class="lni lni-trash-can"></i>
                              </button>
                            </div>
                          </td>
                        </tr>
                        <!-- end table row -->
                  }
                      </tbody>
                    </table>
                    <!-- end table -->
                  </div>
                </div>
                <!-- end card -->
              </div>
              <!-- end col -->
            </div>
            <!-- end row -->
          </div>
          <!-- ========== tables-wrapper end ========== -->

   </div>
</div>


                  <!-- Modal -->
                    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                      <div class="modal-dialog">
                        <form asp-action="CreateFindSearch">
                            <div class="modal-content">
                              <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">Enable Your RoadWay</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                              </div>
                              <div class="modal-body">
                                          <input value="@Model.id" type="text" name="ChauffeurId" id="ChauffeurId" hidden/>
                                          <div class="row"><!--Start Row -->
                                            <div class="col-12">
                                              <div class="select-style-1">
                                                <label>Select Road</label>
                                                <div class="select-position">
                                                  <select name="RoadId" id="RoadId" class="light-bg">
                                                    <option value="">Select Road Way</option>
                                                    @foreach (var road in ViewData["Roadlist"] as List<RoadWayWebModel>)
                                                    {
                                                        <option value="@road.id">@road.RoadName </option>
                                                    }
                                                  </select>
                                                </div>
                                              </div>
                                            </div><!--End Col -->
                                            
                                            <input type="text" value=""name="RoadCode" id="RoadCode" hidden/>
                                            <div class="col-12">
                                              <div class="select-style-1">
                                                <label>Select School</label>
                                                <div class="select-position">
                                                  <select name="SchholId" id="SchholId" class="light-bg">
                                                    <option value="">Select Destination School </option>
                                                    @foreach (var item in ViewData["school"] as List<SchoolWebModel>)
                                                    {
                                                        <option value="@item.schoolId">@item.SchoolName </option>
                                                    }
                                                  </select>
                                                </div>
                                              </div>
                                            </div><!--End Col -->
                                            <input value="@ViewBag.Date" type="text" name="CreateDate" id="CreateDate" hidden/>
                                          </div><!--End Row -->
                              </div>
                              <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                <input type="submit" value="Create" class="btn btn-primary" />
                              </div>
                            </div>
                        </form>
                      </div>
                    </div>
                <!--End Modal -->


